# maintenance macros

[gcode_macro UNLOAD_FILAMENT]
gcode:
    G92 E0                                                                   ;Reset the position of the extruder
    G1 E-100 F2000                                                           ;Retract 700 mm of filament at 2000 mm/minute speed, change 700 to the lenght of your bowdentube + 100 mm.
    G92 E0                                                                   ;Reset the position of the extruder

[gcode_macro MESH_BED]
gcode:
    M117 Meshing Bed
    BED_MESH_CLEAR
    {% if printer.toolhead.homed_axes != "xyz" %}
        G28                                                                  ; home axis
    {% endif %}
    BED_MESH_CALIBRATE

[gcode_macro Present_Nozzle]
gcode:
    {% if printer.toolhead.position.z < 48 %}
        G90
        G1 50
    {% endif %}
    G1 X100 Y0 F1500       

[gcode_macro Tune_Bed]
gcode:
    PID_CALIBRATE HEATER=heater_bed TARGET=60

[gcode_macro Tune_Extruder]
gcode:
    PID_CALIBRATE HEATER=extruder TARGET=190